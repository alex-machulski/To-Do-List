(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{100:function(t,e,a){t.exports=a(131)},105:function(t,e,a){},106:function(t,e,a){},131:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),o=a(8),r=a.n(o);a(105),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(106);var l,c,s=a(175),d=a(176),u=a(177),m=a(168),f=a(133),p=a(171),g=a(179),b=a(180),h=a(178),k=a(15),v=a(49),E=a(81),C=a.n(E).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"ecf8e78d-3a9e-4aa3-9a80-8449dce34aaf"}}),y=function(){return C.get("todo-lists")},T=function(t){return C.post("todo-lists",{title:t})},j=function(t){return C.delete("todo-lists/".concat(t))},O=function(t,e){return C.put("todo-lists/".concat(t),{title:e})},I=function(t){return C.get("todo-lists/".concat(t,"/tasks"))},A=function(t,e){return C.delete("todo-lists/".concat(t,"/tasks/").concat(e))},w=function(t,e){return C.post("todo-lists/".concat(t,"/tasks"),{title:e})},S=function(t,e,a){return C.put("todo-lists/".concat(t,"/tasks/").concat(e),a)},x=function(t){return C.post("auth/login",t)},F=function(){return C.delete("auth/login")},L=function(){return C.get("auth/me")};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(l||(l={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(c||(c={}));var z=function(t,e){t.messages.length?e(Z({error:t.messages[0]})):e(Z({error:"Some error occurred"})),e(H({status:"failed"}))},N=function(t,e){e(Z({error:t.message?t.message:"Some error occurred"})),e(H({status:"failed"}))},P=a(25),D=Object(P.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(t,e){t.isLoggedIn=e.payload.value}}}),R=D.reducer,M=D.actions.setIsLoggedInAC,U=Object(P.b)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppStatusAC:function(t,e){t.status=e.payload.status},setAppErrorAC:function(t,e){t.error=e.payload.error},SetAppIsInitializedAC:function(t,e){t.isInitialized=e.payload.isInitialized}}}),q=U.reducer,B=U.actions,H=B.setAppStatusAC,Z=B.setAppErrorAC,J=B.SetAppIsInitializedAC,K=Object(P.b)({name:"todolists",initialState:[],reducers:{removeTodolistAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));a>-1&&t.splice(a,1)},addTodolistAC:function(t,e){t.unshift(Object(v.a)(Object(v.a)({},e.payload.todolist),{},{filter:"all",entityStatus:"idle"}))},changeTodolistTitleAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].title=e.payload.title},changeTodolistFilterAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].filter=e.payload.filter},setTodolistsAC:function(t,e){return e.payload.todos.map((function(t){return Object(v.a)(Object(v.a)({},t),{},{filter:"all",entityStatus:"idle"})}))},changeTodolistEntityStatusAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].entityStatus=e.payload.entityStatus}}}),W=K.reducer,$=K.actions,_=$.removeTodolistAC,G=$.addTodolistAC,V=$.changeTodolistTitleAC,Y=$.changeTodolistFilterAC,Q=$.setTodolistsAC,X=$.changeTodolistEntityStatusAC,tt=function(t,e){t(H({status:"loading"})),y().then((function(e){t(Q({todos:e.data})),t(H({status:"succeeded"}))})).catch((function(e){N(e,t)}))},et=a(64),at=a.n(et),nt=a(82),it=Object(P.b)({name:"tasks",initialState:{},reducers:{removeTaskAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&a.splice(n,1)},addTaskAC:function(t,e){t[e.payload.task.todoListId].unshift(e.payload.task)},changeTaskStatusAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&(a[n].status=e.payload.status)},changeTaskTitleAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&(a[n].title=e.payload.title)},setTasksAC:function(t,e){t[e.payload.todolistId]=e.payload.tasks}},extraReducers:function(t){t.addCase(G,(function(t,e){t[e.payload.todolist.id]=[]})),t.addCase(_,(function(t,e){delete t[e.payload.todolistId]})),t.addCase(Q,(function(t,e){e.payload.todos.forEach((function(e){t[e.id]=[]}))}))}}),ot=it.reducer,rt=it.actions,lt=rt.removeTaskAC,ct=rt.addTaskAC,st=rt.changeTaskStatusAC,dt=rt.changeTaskTitleAC,ut=rt.setTasksAC,mt=a(172),ft=a(132),pt=a(42),gt=a(181),bt=a(169),ht=i.a.memo((function(t){var e=t.addItem,a=t.disabled,o=void 0!==a&&a,r=Object(n.useState)(""),l=Object(pt.a)(r,2),c=l[0],s=l[1],d=Object(n.useState)(null),u=Object(pt.a)(d,2),f=u[0],p=u[1],g=function(){c.trim()?e(c):p("Title is required!"),s("")};return i.a.createElement("div",null,i.a.createElement(gt.a,{value:c,onChange:function(t){s(t.currentTarget.value)},onKeyPress:function(t){null!==f&&p(null),"Enter"===t.key&&g()},error:!!f,helperText:f,label:"New Title",disabled:o}),i.a.createElement(m.a,{color:"primary",onClick:g,disabled:o},i.a.createElement(bt.a,null)))})),kt=a(89),vt=i.a.memo((function(t){var e=Object(n.useState)(!1),a=Object(pt.a)(e,2),o=a[0],r=a[1],l=Object(n.useState)(t.title),c=Object(pt.a)(l,2),s=c[0],d=c[1];return o?i.a.createElement(gt.a,{onBlur:function(){r(!1),s.trim()&&t.changeTitle(s.trim())},autoFocus:!0,value:s,onChange:function(t){return d(t.currentTarget.value)}}):i.a.createElement("span",{onDoubleClick:function(){return r(!0)}},t.title)})),Et=a(170),Ct=a(183),yt=i.a.memo((function(t){var e=Object(n.useCallback)((function(){return t.removeTask(t.task.id,t.todolistId)}),[t.task.id,t.todolistId]),a=Object(n.useCallback)((function(e){var a=e.currentTarget.checked;t.changeTaskStatus(t.task.id,a?l.Completed:l.New,t.todolistId)}),[t.task.id,t.todolistId]),o=Object(n.useCallback)((function(e){t.changeTaskTitle(t.task.id,e,t.todolistId)}),[t.task.id,t.todolistId]);return i.a.createElement("div",{key:t.task.id,className:t.task.status===l.Completed?"is-done":""},i.a.createElement(Ct.a,{onChange:a,checked:t.task.status===l.Completed}),i.a.createElement(vt,{title:t.task.title,changeTitle:o}),i.a.createElement(m.a,{onClick:e},i.a.createElement(Et.a,null)))})),Tt=i.a.memo((function(t){var e=t.demo,a=void 0!==e&&e,o=Object(kt.a)(t,["demo"]),r=Object(k.b)();Object(n.useEffect)((function(){var t;a||r((t=o.todolist.id,function(e){e(H({status:"loading"})),I(t).then((function(a){var n=a.data.items;e(ut({tasks:n,todolistId:t})),e(H({status:"succeeded"}))})).catch((function(t){N(t,e)}))}))}),[]);var c=Object(n.useCallback)((function(t){o.addTask(o.todolist.id,t)}),[o.addTask,o.todolist.id]),s=Object(n.useCallback)((function(){return o.changeFilter("all",o.todolist.id)}),[o.todolist.id,o.changeFilter]),d=Object(n.useCallback)((function(){return o.changeFilter("active",o.todolist.id)}),[o.todolist.id,o.changeFilter]),u=Object(n.useCallback)((function(){return o.changeFilter("completed",o.todolist.id)}),[o.todolist.id,o.changeFilter]),f=Object(n.useCallback)((function(){return o.removeTodolist(o.todolist.id)}),[o.removeTodolist,o.todolist.id]),g=Object(n.useCallback)((function(t){o.changeTodolistTitle(o.todolist.id,t)}),[o.todolist.id,o.changeTodolistTitle]),b=o.tasks;return"active"===o.todolist.filter&&(b=o.tasks.filter((function(t){return t.status===l.New}))),"completed"===o.todolist.filter&&(b=o.tasks.filter((function(t){return t.status===l.Completed}))),i.a.createElement("div",null,i.a.createElement("h3",{style:{textAlign:"center"}},i.a.createElement(vt,{title:o.todolist.title,changeTitle:g}),i.a.createElement(m.a,{onClick:f,disabled:"loading"===o.todolist.entityStatus},i.a.createElement(Et.a,null))),i.a.createElement(ht,{addItem:c,disabled:"loading"===o.todolist.entityStatus}),i.a.createElement("div",{style:{marginTop:"20px"}},i.a.createElement(p.a,{variant:"all"===o.todolist.filter?"contained":"outlined",color:"primary",size:"small",style:{marginRight:"3px"},onClick:s},"All"),i.a.createElement(p.a,{variant:"active"===o.todolist.filter?"contained":"outlined",color:"primary",size:"small",style:{marginRight:"3px"},onClick:d},"Active"),i.a.createElement(p.a,{variant:"completed"===o.todolist.filter?"contained":"outlined",color:"primary",size:"small",style:{marginRight:"3px"},onClick:u},"Completed")),i.a.createElement("ul",{style:{listStyle:"none",padding:"0px"}},b.map((function(t){return i.a.createElement(yt,{key:t.id,changeTaskStatus:o.changeTaskStatus,changeTaskTitle:o.changeTaskTitle,task:t,todolistId:o.todolist.id,removeTask:o.removeTask})}))))})),jt=a(12),Ot=function(t){var e=t.demo,a=void 0!==e&&e,o=Object(k.b)(),r=Object(k.c)((function(t){return t.todolists})),l=Object(k.c)((function(t){return t.tasks}));Object(n.useEffect)((function(){!a&&b&&o(tt)}),[]);var c=Object(n.useCallback)((function(t,e){var a=function(t,e){return function(a){a(H({status:"loading"})),A(t,e).then((function(n){var i=lt({taskId:e,todolistId:t});a(i),a(H({status:"succeeded"}))})).catch((function(t){N(t,a)}))}}(e,t);o(a)}),[]),s=Object(n.useCallback)((function(t,e){o(function(t,e){return function(){var a=Object(nt.a)(at.a.mark((function a(n){var i,o;return at.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(H({status:"loading"})),a.next=4,w(t,e);case 4:0===(i=a.sent).data.resultCode?(o=i.data.data.item,n(ct({task:o})),n(H({status:"succeeded"}))):z(i.data,n),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),N(a.t0,n);case 11:return a.prev=11,n(H({status:"succeeded"})),a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[0,8,11,14]])})));return function(t){return a.apply(this,arguments)}}()}(t,e))}),[]),d=Object(n.useCallback)((function(t,e,a){o(function(t,e,a){return function(n,i){var o=i().tasks[a].find((function(e){return e.id===t}));o?(n(H({status:"loading"})),S(a,t,{status:e,title:o.title,startDate:o.startDate,priority:o.priority,description:o.description,deadline:o.deadline}).then((function(i){if(0===i.data.resultCode){var o=st({taskId:t,status:e,todolistId:a});n(o),n(H({status:"succeeded"}))}else z(i.data,n)})).catch((function(t){N(t,n)}))):console.warn("Task is not found")}}(t,e,a))}),[]),u=Object(n.useCallback)((function(t,e,a){o(function(t,e,a){return function(n,i){var o=i().tasks[a].find((function(e){return e.id===t}));n(H({status:"loading"})),S(a,t,{status:o.status,title:e,startDate:o.startDate,priority:o.priority,description:o.description,deadline:o.deadline}).then((function(i){if(0===i.data.resultCode){var o=dt({taskId:t,title:e,todolistId:a});n(o),n(H({status:"succeeded"}))}else z(i.data,n)})).catch((function(t){N(t,n)}))}}(t,e,a))}),[]),m=Object(n.useCallback)((function(t,e){var a=Y({id:e,filter:t});o(a)}),[]),f=Object(n.useCallback)((function(t){var e,a=(e=t,function(t){t(H({status:"loading"})),t(X({id:e,entityStatus:"loading"})),j(e).then((function(a){0===a.data.resultCode?(t(_({todolistId:e})),t(H({status:"succeeded"}))):z(a.data,t)})).catch((function(e){N(e,t)}))});o(a)}),[]),p=Object(n.useCallback)((function(t){o(function(t){return function(e){e(H({status:"loading"})),T(t).then((function(t){0===t.data.resultCode?(e(G({todolist:t.data.data.item})),e(H({status:"succeeded"}))):z(t.data,e)})).catch((function(t){N(t,e)}))}}(t))}),[o]),g=Object(n.useCallback)((function(t,e){var a,n,i=(a=t,n=e,function(t){t(H({status:"loading"})),O(a,n).then((function(e){var i=V({id:a,title:n});t(i),t(H({status:"succeeded"}))})).catch((function(e){N(e,t)}))});o(i)}),[]),b=Object(k.c)((function(t){return t.auth.isLoggedIn}));return b?i.a.createElement(i.a.Fragment,null,i.a.createElement(mt.a,{container:!0,style:{padding:"10px"}},i.a.createElement(ht,{addItem:p})),i.a.createElement(mt.a,{container:!0,spacing:3},r.map((function(t){var e=l[t.id];return i.a.createElement(mt.a,{item:!0,key:t.id},i.a.createElement(ft.a,{elevation:10,style:{padding:"20px"}},i.a.createElement(Tt,{todolist:t,tasks:e,removeTask:c,changeFilter:m,addTask:s,changeTaskStatus:d,removeTodolist:f,changeTaskTitle:u,changeTodolistTitle:g,demo:a})))})))):i.a.createElement(jt.a,{to:"/login"})},It=a(185),At=a(182);function wt(t){return i.a.createElement(At.a,Object.assign({elevation:6,variant:"filled"},t))}function St(){var t=Object(k.b)(),e=Object(k.c)((function(t){return t.app.error})),a=function(e,a){"clickaway"!==a&&t(Z({error:null}))};return i.a.createElement(It.a,{open:null!==e,autoHideDuration:6e3,onClose:a},i.a.createElement(wt,{onClose:a,severity:"error"},e))}var xt=a(186),Ft=a(167),Lt=a(173),zt=a(174),Nt=a(88),Pt=function(){var t=Object(k.b)(),e=Object(Nt.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Email is required",t.password?t.password.length<3&&(e.password="Must be 3 characters or more"):e.password="Required",e},onSubmit:function(e){var a;t((a=e,function(t){t(H({status:"loading"})),x(a).then((function(e){0===e.data.resultCode?(t(M({value:!0})),t(H({status:"succeeded"}))):z(e.data,t)})).catch((function(e){N(e,t)}))}))}});return Object(k.c)((function(t){return t.auth.isLoggedIn}))?i.a.createElement(jt.a,{to:"/"}):i.a.createElement(mt.a,{container:!0,justify:"center"},i.a.createElement(mt.a,{item:!0,xs:4},i.a.createElement(xt.a,null,i.a.createElement(Ft.a,null,i.a.createElement("p",null,"To log in get registered",i.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"}," here")),i.a.createElement("p",null,"or use common test account credentials:"),i.a.createElement("p",null,"Email: free@samuraijs.com"),i.a.createElement("p",null,"Password: free")),i.a.createElement("form",{onSubmit:e.handleSubmit},i.a.createElement(Lt.a,null,i.a.createElement(gt.a,Object.assign({label:"Email",margin:"normal"},e.getFieldProps("email"))),e.touched.email&&e.errors.email?i.a.createElement("div",{style:{color:"red"}},e.errors.email):null,i.a.createElement(gt.a,Object.assign({type:"password",label:"Password",margin:"normal"},e.getFieldProps("password"))),e.touched.password&&e.errors.password?i.a.createElement("div",{style:{color:"red"}},e.errors.password):null,i.a.createElement(zt.a,{label:"Remember me",control:i.a.createElement(Ct.a,e.getFieldProps("rememberMe"))}),i.a.createElement(p.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))};var Dt=function(t){var e=t.demo,a=void 0!==e&&e,o=Object(k.b)(),r=Object(k.c)((function(t){return t.app.status})),l=Object(k.c)((function(t){return t.app.isInitialized})),c=Object(k.c)((function(t){return t.auth.isLoggedIn}));return Object(n.useEffect)((function(){o((function(t){L().then((function(e){0===e.data.resultCode&&t(M({value:!0}))})).finally((function(){t(J({isInitialized:!0}))}))}))}),[]),l?i.a.createElement("div",{className:"App"},i.a.createElement(St,null),i.a.createElement(d.a,{position:"static"},i.a.createElement(u.a,null,i.a.createElement(m.a,{edge:"start",color:"inherit","aria-label":"menu"},i.a.createElement(h.a,null)),i.a.createElement(f.a,{variant:"h6"},"News"),c&&i.a.createElement(p.a,{onClick:function(){o((function(t){t(H({status:"loading"})),F().then((function(e){0===e.data.resultCode?(t(M({value:!1})),t(H({status:"succeeded"}))):z(e.data,t)})).catch((function(e){N(e,t)}))}))},color:"inherit"},"Logout")),"loading"===r&&i.a.createElement(g.a,null)),i.a.createElement(b.a,{fixed:!0},i.a.createElement(jt.d,null,i.a.createElement(jt.b,{exact:!0,path:"/",render:function(){return i.a.createElement(Ot,{demo:a})}}),i.a.createElement(jt.b,{path:"/login",render:function(){return i.a.createElement(Pt,null)}}),i.a.createElement(jt.b,{path:"/404",render:function(){return i.a.createElement("h1",null,"404: PAGE NOT FOUND")}}),i.a.createElement(jt.a,{from:"*",to:"/404"})))):i.a.createElement("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"}},i.a.createElement(s.a,null))},Rt=a(20),Mt=a(45),Ut=Object(Rt.c)({todolists:W,tasks:ot,app:q,auth:R}),qt=Object(P.a)({reducer:Ut,middleware:function(t){return t().prepend(Mt.a)}});window.store=qt;var Bt=a(44);r.a.render(i.a.createElement(k.a,{store:qt},i.a.createElement(Bt.a,null,i.a.createElement(Dt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[100,1,2]]]);
//# sourceMappingURL=main.de384006.chunk.js.map